# ===================================
# CAMERA AI - CẤU HÌNH CHÍNH
# ===================================

# Camera Settings
camera:
  # Nguồn đầu vào: video file hoặc RTSP stream
  # Video: "videos/11933881_2160_3840_30fps.mp4"
  # RTSP: "rtsp://admin:L223C2D3@192.168.1.53:554/cam/realmonitor?channel=1&subtype=1"
  source: "rtsp://admin:L223C2D3@192.168.1.53:554/cam/realmonitor?channel=1&subtype=1"
  
  width: 1920
  height: 1080
  fps: 25
  buffer_size: 1  # Giảm buffer để giảm độ trễ (chỉ cho RTSP)

detection:
  # YOLOv11 models
  person_model: "models/yolo11n.pt"  # Model phát hiện người
  vehicle_model: "models/yolo11n.pt"  # Model phát hiện xe
  license_plate_model: "models/license_plate_detector.pt"  # Model phát hiện biển số
  
  # Confidence thresholds
  person_confidence: 0.5
  vehicle_confidence: 0.4  # Giảm để phát hiện nhiều xe hơn
  plate_confidence: 0.2  # Giảm để phát hiện biển số dễ hơn
  
  # Classes to detect
  person_classes: [0]  # Class 0 = person trong COCO
  vehicle_classes: [2, 3, 5, 7]  # car, motorcycle, bus, truck

recording:
  enabled: true
  save_path: "detections"
  save_snapshots: true
  snapshot_path: "snapshots"
  video_retention_days: 7  # Xóa video cũ hơn 7 ngày

alerts:
  enabled: true
  person_alert: true
  vehicle_alert: true
  unknown_plate_alert: true
  
ocr:
  enabled: true
  engine: "easyocr"  # Sử dụng EasyOCR (chính xác hơn PaddleOCR)
  languages: ['en']  # Ngôn ngữ cho OCR

license_plate:
  enabled: true
  use_yolo_plate: true  # Sử dụng YOLOv8 để phát hiện biển số
  yolo_model: "yolov8n.pt"  # Model YOLOv8
  min_width: 50
  min_height: 20
  expand_roi: 0.1  # Mở rộng vùng xe 10% để bắt biển số tốt hơn

dashboard:
  enabled: true
  host: "0.0.0.0"
  port: 8080  # Port cho web dashboard (đổi từ 5000 để tránh conflict với AirPlay)
  debug: false
  refresh_interval: 2  # seconds
  
  # Display settings
  show_fps: true
  show_confidence: true
  show_tracking_id: true

database:
  type: "sqlite"
  path: "detections/detections.db"  # Database chính

# Performance Settings
performance:
  # GPU settings
  use_gpu: false  # Đặt true nếu có NVIDIA GPU
  device: "cpu"  # "0" cho GPU, "cpu" cho CPU
  
  # Processing
  skip_frames: 0  # Bỏ qua N frames (0 = xử lý tất cả)
  resize_frame: false
  resize_width: 1280
  resize_height: 720
  
  # Multi-threading
  use_threading: true
  max_workers: 2

# Logging
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  save_logs: true
  log_file: "camera_ai.log"
  max_log_size: 10485760  # 10MB
  backup_count: 5

